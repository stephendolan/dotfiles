# Modern tmux configuration - clean, simple, lovely

# Core settings
set-option -g default-shell /bin/zsh
set-option -g default-terminal "screen-256color"
set-option -sa terminal-overrides ',xterm-256color:RGB'
set-option -g focus-events on

# Better prefix key (Ctrl-a instead of Ctrl-b)
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# Mouse support
set -g mouse on

# Allow clicking URLs with Shift+click (or Cmd+click on macOS)
# This passes mouse events through to the terminal
bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'select-pane -t=; copy-mode -e; send-keys -M'"
bind -n WheelDownPane select-pane -t= \; send-keys -M

# Start windows and panes at 1, not 0
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1
set-option -g renumber-windows on

# Vi mode
set-window-option -g mode-keys vi
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# Intuitive split commands
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind s split-window -h -c "#{pane_current_path}"  # For Cmd+S mapping (left/right)
bind S split-window -v -c "#{pane_current_path}"  # For Cmd+Shift+S mapping (top/bottom)
bind t new-window -c "#{pane_current_path}"       # For Cmd+T mapping
bind ] next-window                                # For Cmd+] mapping
bind [ previous-window                            # For Cmd+[ mapping

# Window selection with number keys (for Cmd+number mapping)
bind 1 select-window -t :=1
bind 2 select-window -t :=2
bind 3 select-window -t :=3
bind 4 select-window -t :=4
bind 5 select-window -t :=5
bind 6 select-window -t :=6
bind 7 select-window -t :=7
bind 8 select-window -t :=8
bind 9 select-window -t :=9

unbind '"'
unbind %

# Easy pane navigation (vim-like)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Pane resizing
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Easy config reload
bind r source-file ~/.tmux.conf \; display-message "Config reloaded!"

# Status bar
set -g status-position top
set -g status-style 'bg=#1e1e2e fg=#cdd6f4'
set -g status-left '#[fg=#89b4fa,bold]  #S '
set -g status-left-length 30
set -g status-right '#[fg=#f9e2af] %Y-%m-%d #[fg=#89b4fa] %H:%M '
set -g status-right-length 50

# Window status
set-window-option -g window-status-style 'fg=#6c7086'
set-window-option -g window-status-current-style 'fg=#1e1e2e bg=#89b4fa bold'
set-window-option -g window-status-format ' #I:#W '
set-window-option -g window-status-current-format ' #I:#W '

# Pane borders
set -g pane-border-style 'fg=#313244'
set -g pane-active-border-style 'fg=#89b4fa'

# Message style
set -g message-style 'fg=#cdd6f4 bg=#313244'

# Activity monitoring
setw -g monitor-activity on
set -g visual-activity off

# Reduce escape time for better vim experience
set-option -sg escape-time 10

# History
set -g history-limit 10000

# Display times
set -g display-panes-time 2000
set -g display-time 2000

# Quiet mode
set -g visual-bell off
set -g bell-action none