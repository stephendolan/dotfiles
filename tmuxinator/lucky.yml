---

name: lucky
root: ~/repos/@personal/<%= @args[0] %>

# Kill any active Docker containers on start to guarantee that we
# can start up any related Docker Compose containers for this project.
on_project_start: docker kill $(docker ps -q) > /dev/null 2>&1

# Remove the Lucky Overmind process socket file
on_project_stop: rm .overmind.sock

socket_name: <%= @args[0].split("/").last %>

# Layout
windows:
  - editor:
      layout: 34ec,272x81,0,0{135x81,0,0[135x65,0,0,0,135x15,0,66,3],136x81,136,0,2}
      panes:
        - vim_one:
          - clear
          - vim
        - terminal:
          - clear
        - vim_two:
          - clear
          - vim
  - server:
      layout: even-horizontal
      panes:
        - docker:
          - docker-compose up
        - lucky_server:
          - rm .overmind.sock
          - pkill -f overmind
          - lucky dev
